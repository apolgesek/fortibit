<app-modal>
	<div class="dialog-header">
		<h2>
			{{ header }} <small *ngIf="!isReadOnly">in {{ entryGroupName }}</small>
		</h2>
		<a
			href="#"
			role="button"
			aria-label="Close"
			class="close-dialog"
			(click)="close(); (false)"
			>&times;
		</a>
	</div>
	<div #entryForm id="entry-form" [formGroup]="newEntryForm">
		<!-- <div>
			<select formControlName="type">
				<option *ngFor="let type of entryTypes" [value]="type">
					{{ type }}
				</option>
			</select>
		</div> -->
		<div class="inputgroup" [ngClass]="{ readonly: isReadOnly }">
			<span class="inputgroup-addon"
				><i-feather name="bookmark"></i-feather
			></span>
			<input
				[attr.aria-invalid]="isControlInvalid(title)"
				aria-describedby="title-invalid"
				type="text"
				[readonly]="isReadOnly"
				id="entry-title"
				#autofocus
				formControlName="title"
				placeholder="Title"
			/>
		</div>
		<div
			*ngIf="isControlInvalid(title)"
			id="title-invalid"
			class="validation-error"
		>
			Title is required
		</div>
		<ng-container
			*ngComponentOutlet="
				formPartialComponent;
				inputs: { additionalData, isReadOnly }
			"
		/>
	</div>
	<div class="footer-container">
		<button
			*ngIf="isReadOnly"
			type="button"
			(click)="delete(); (false)"
			class="text-btn delete"
		>
			<i-feather name="trash"></i-feather>
			Delete
		</button>
		<button
			*ngIf="isReadOnly"
			type="button"
			(click)="restore(); (false)"
			class="text-btn restore"
		>
			<i-feather name="refresh-ccw"></i-feather>
			Restore
		</button>
		<button
			*ngIf="!isReadOnly; else closeBtn"
			[disabled]="saveLocked"
			(click)="addNewEntry()"
			id="entry-submit"
			class="primary-btn"
		>
			Confirm
		</button>
		<ng-template #closeBtn>
			<button
				type="button"
				(click)="closeReadOnly()"
				id="close"
				class="primary-btn"
			>
				Close
			</button>
		</ng-template>
	</div>
</app-modal>
